function getzongjia(){var i=0;$(".xj").each(function(t,s){i+=Number($(s).html()),$(".zongjia .zj").html(i.toFixed(2))})}function getzongnum(){var i=0;$(".sl").each(function(t,s){i+=Number($(s).val()),$(".num").html(i)})}var can=[{name:"白切鸡",price:16,img:"./static/img/bqj.jpg",goodsid:1},{name:"麻婆豆腐",price:12,img:"./static/img/df.jpg",goodsid:2},{name:"东坡肉",price:20,img:"./static/img/dpr.jpg",goodsid:3},{name:"肉夹馍",price:6,img:"./static/img/rjm.jpg",goodsid:4},{name:"烧饼",price:2.5,img:"./static/img/db.jpg",goodsid:5},{name:"麻辣烫",price:19.9,img:"./static/img/kc.jpg",goodsid:6},{name:"卤肉",price:22,img:"./static/img/lr.jpg",goodsid:7},{name:"酥饼",price:3.5,img:"./static/img/sb.jpg",goodsid:8},{name:"老醋花生",price:3.5,img:"./static/img/lchs.jpg",goodsid:9},{name:"凉拌木耳",price:3.5,img:"./static/img/lbmu.jpg",goodsid:10},{name:"清蒸鲈鱼",price:3.5,img:"./static/img/qzly.jpg",goodsid:11},{name:"香肠",price:3.5,img:"./static/img/lc.jpg",goodsid:12}],taocan=[{name:"披萨",price:39.9,img:"./static/img/pisa.jpg",goodsid:1},{name:"蛋皮肉卷",price:35,img:"./static/img/roujuan.jpg",goodsid:2},{name:"蒸排骨",price:38,img:"./static/img/paigu.jpg",goodsid:3},{name:"卤鸡翅",price:6,img:"./static/img/jichi.jpg",goodsid:4},{name:"卤面",price:2.5,img:"./static/img/lumian.jpg",goodsid:5},{name:"白糖糕",price:12,img:"./static/img/btg.jpg",goodsid:6},{name:"铜锣烧",price:8.8,img:"./static/img/tls.jpg",goodsid:7},{name:"五香素鸡",price:15,img:"./static/img/wxsj.jpg",goodsid:8},{name:"鱼香茄子",price:10,img:"./static/img/yxqz.jpg",goodsid:9},{name:"蛋卷",price:3.5,img:"./static/img/dj.jpg",goodsid:10},{name:"干锅土豆片",price:16,img:"./static/img/qzly.jpg",goodsid:11},{name:"红烧猪蹄",price:22,img:"./static/img/hszt.jpg",goodsid:12}],meituan=angular.module("meituan",[]);meituan.controller("canpin",function(i){i.cp=can,i.tc=taocan,i.cart={},i.goodsnum={},i.buy=function(t){var s=can[t].goodsid;null==i.cart[s]?(i.cart[s]=can[t],i.goodsnum[s]=1):i.goodsnum[s]+=1},i.mai=function(t){var s=taocan[t].goodsid;null==i.cart[s]?(i.cart[s]=taocan[t],i.goodsnum[s]=1):i.goodsnum[s]+=1},i.jsgw=function(t){var s=can[t].goodsid;null==i.cart[s]?(i.cart[s]=can[t],i.goodsnum[s]=1):i.goodsnum[s]-=1},i.jsgwe=function(t){var s=taocan[t].goodsid;null==i.cart[s]?(i.cart[s]=taocan[t],i.goodsnum[s]=1):i.goodsnum[s]-=1},i.$watch("goodsnum",function(){var t=0,s=0;for(var a in i.goodsnum)s++,t+=i.goodsnum[a]*i.cart[a].price;i.total=t,i.cartnum=s},!0)}),$(function(){$(".jia").click(function(){FastClick.attach(document.body);var i=$(this).closest(".meishi").find(".sl"),t=parseInt(i.val())+1;$(this).closest(".meishi").find(".sl").val(t);var s=parseFloat($(this).closest(".meishi").find(".price").html()),a=s*t;$(this).closest(".meishi").find(".xj").html(a.toFixed(2)),getzongjia(),getzongnum()}),$(".jian").click(function(){FastClick.attach(document.body);var i=$(this).closest(".meishi").find(".sl"),t=parseInt(i.val())-1;0>t&&(t=0),$(this).closest(".meishi").find(".sl").val(t);var s=parseFloat($(this).closest(".meishi").find(".price").html()),a=s*t;$(this).closest(".meishi").find(".xj").html(a.toFixed(2)),getzongjia(),getzongnum()}),$(".sl").focusout(function(){var i=$(this).closest(".meishi").find(".sl"),t=parseInt(i.val());0>t&&(t=0),$(this).closest(".meishi").find(".sl").val(t);var s=parseFloat($(this).closest(".meishi").find(".price").html()),a=s*t;$(this).closest(".meishi").find(".xj").html(a.toFixed(2)),getzongjia(),getzongnum()}),$(".car").click(function(i){i.stopPropagation(),$(".hiden").show(),$(".shsp").show()}),$(".gb").click(function(i){i.stopPropagation(),$(".hiden").fadeOut(100),$(".shsp").hide(100)});var i=$(".cpmclist li");i.click(function(){FastClick.attach(document.body),$(this).addClass("active").siblings().removeClass("active");var t=i.index(this);$(".cplist >ul").eq(t).show().siblings().hide()}),$(".tj").click(function(){$(".hiden").fadeIn(100),$(".zhifu").show(100)}),$(".guanbi").click(function(){$(".hiden").fadeOut(100),$(".zhifu").hide(100)})});